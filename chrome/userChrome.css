@namespace xul "http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul";

:root {
  --bg1: light-dark(#f5f6f6, #383838);
  --bg2: light-dark(#fff, #454545);
  --bg3: light-dark(rgba(50, 50, 50, .1), rgba(225, 225, 225, .1));
  --bg4: light-dark(rgba(255, 255, 255, .75), rgba(15, 15, 12, .75));
  --bs1: 0 5px 15px rgba(0, 0, 0, .2), 0 0 0 .5px rgba(0, 0, 0, .15);
  --bs2: 0 5px 15px rgba(0, 0, 0, .25), 0 0 0 .5px rgba(0, 0, 0, .5);
  --outline-color: light-dark(#7db0f7, #2c749f);
  --button-bgcolor: light-dark(rgba(70, 70, 70, .12), rgba(170, 170, 170, .15)) !important;
  --button-hover-bgcolor: light-dark(rgba(70, 70, 70, .1), rgba(170, 170, 170, .2)) !important;
  --button-active-bgcolor: light-dark(rgba(70, 70, 70, .15), rgba(170, 170, 170, .3)) !important;
  --button-background-color: var(--button-bgcolor) !important;
  --button-background-color-hover: var(--button-hover-bgcolor) !important;
  --button-background-color-active: var(--button-active-bgcolor) !important;
  --in-content-primary-button-background: light-dark(#2b87fb, #3078ef) !important;
  --in-content-primary-button-background-hover: light-dark(#227cfb, #2566e1) !important;
  --in-content-primary-button-background-active: light-dark(#1c66e8, #225cca) !important;
  --in-content-primary-button-text-color: #fff !important;
  --button-text-color-primary: #fff !important;
  --button-primary-color: #fff !important;
  --color-accent-primary: light-dark(#2b87fb, #3078ef) !important;
  --color-accent-primary-hover: light-dark(#227cfb, #2566e1) !important;
  --color-accent-primary-active: light-dark(#1c66e8, #225cca) !important;
  --button-primary-bgcolor: light-dark(#2b87fb, #3078ef) !important;
  --button-primary-hover-bgcolor: light-dark(#227cfb, #2566e1) !important;
  --button-primary-active-bgcolor: light-dark(#1c66e8, #225cca) !important;
  --in-content-button-background: light-dark(rgba(70, 70, 70, .1), rgba(170, 170, 170, .2)) !important;
  --in-content-button-background-hover: light-dark(rgba(70, 70, 70, .15), rgba(170, 170, 170, .3)) !important;
  --in-content-button-background-active: light-dark(rgba(70, 70, 70, .12), rgba(170, 170, 170, .15)) !important;
  --link-color: light-dark(#4481f2, #1280fd) !important;
  --toolbar-field-focus-background-color: light-dark(rgba(155, 155, 155, .25), rgba(195, 195, 195, .25)) !important;
  --urlbarView-result-button-hover-color: light-dark(rgba(0, 0, 0, .8), rgba(255, 255, 255, .8)) !important;
  --urlbarView-result-button-hover-background-color: light-dark(rgba(155, 155, 155, .5), rgba(195, 195, 195, .5)) !important;
  --toolbarbutton-icon-fill-attention: light-dark(#4481f2, #1280fd) !important;
  --arrowpanel-background: light-dark(#fff, #383838) !important;
  --focus-outline-color: transparent !important;
  --in-content-box-background: light-dark(rgba(155, 155, 155, .2), rgba(195, 195, 195, .2)) !important;
  --background-color-box: light-dark(rgba(155, 155, 155, .2), rgba(195, 195, 195, .2)) !important;
  --in-content-box-border-color: transparent !important;
  --sidebar-background-color: transparent !important;
  --sidebar-border-color: transparent !important;
  --sidebar-box-border: transparent !important;
  --sidebar-box-background: light-dark(rgba(102, 105, 108, .1), rgba(165, 165, 165, .1)) !important;
  --urlbarView-hover-background: light-dark(rgba(155, 155, 155, .2), rgba(195, 195, 195, .2)) !important;
  --urlbarView-highlight-background: light-dark(rgba(155, 155, 155, .3), rgba(195, 195, 195, .3)) !important;
  --urlbarView-highlight-color: light-dark(#000, #fff) !important;
  --input-bgcolor: light-dark(rgba(70, 70, 70, .1), rgba(170, 170, 170, .2)) !important;
  --input-border-color: transparent !important;
  --tabstrip-min-height: unset !important;
  --tab-icon-overlay-fill: light-dark(rgba(0, 0, 0, .8), rgba(225, 225, 225, .8)) !important;
  --toolbarbutton-hover-background: color-mix(in srgb, currentColor 10%, transparent) !important;
  --toolbarbutton-active-background: color-mix(in srgb, currentColor 15%, transparent) !important;
  @media (-moz-platform: windows) {
  --bs1: 0 45px 65px rgba(0, 0, 0, .35), 0 0 0 1px rgba(0, 0, 0, .17);
  --bs2: 0 45px 65px rgba(0, 0, 0, .45), 0 0 0 1px rgba(255, 255, 255, .15);    
  }
}

:root[macOSNativeFullscreen] #navigator-toolbox {
  transform: none !important;
&.fullscreen-with-menubar {
  box-shadow: none !important;
}
}

.titlebar-buttonbox-container {
  position: absolute !important;
  left: 7px;
  top: 17.5px;
}

#tabbrowser-tabbox {
  box-shadow: none !important;
  outline: none !important;
  overflow: unset !important;
}

:root:not([inDOMFullscreen]) {
#tabbrowser-tabbox browser {
  margin: 0 8px 8px;
  border-radius: 8px;
  clip-path: circle(100%);
  box-shadow: 0 1.5px 6px #00000026;
  background-color: light-dark(#fff, #202020) !important;
  -moz-window-dragging: no-drag;
}

#tabbrowser-tabpanels {
  margin-top: 0;
  transition: .25s !important;
  background-color: transparent !important;
}
}

#browser {
  clip-path: circle(100%);
  background-color: transparent !important;
}

:has(#PersonalToolbar:hover, #sidebar-main:hover) {
#tabbrowser-tabbox browser {
  -moz-window-dragging: unset;
}
}

#navigator-toolbox {
  background: none !important;
  border: none !important;
  z-index: unset !important;
}

.browser-toolbar {
  border: none !important;
}

#nav-bar {
  padding: 12px 3px 4.5px 79px !important;
  height: 53.5px !important;
}

#TabsToolbar {
  margin: 6.5px 145px -46px 443px !important;
  padding: 0 !important;
  background: none !important;
  max-height: 42px !important;
  z-index: 8;
}

.titlebar-spacer {
  display: none !important
}

#nav-bar, #PersonalToolbar {
  background: transparent !important;
}

#PersonalToolbar {
  position: fixed;
  width: calc(100% - 16px);
  margin: 0 8px 8px 8px !important;
  height: 48px !important;
  z-index: 1;
  bottom: -32px;
  opacity: 0;
  transition: .25s;
  padding-bottom: 0 !important;
  background-color: var(--bg4) !important;
  backdrop-filter: blur(30px) !important;
  box-shadow: var(--bs1) !important;
  border-bottom-left-radius: 8px !important;
  border-bottom-right-radius: 8px !important;
  overflow: initial !important;
}

#PersonalToolbar:hover {
  bottom: 0;
  opacity: 1;
  transition: .25s;
}

#PersonalToolbar::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  bottom: -8px;
  height: 8px;
  background-color: transparent; 
}

toolbarbutton.bookmark-item:not(.subviewbutton) {
  margin: 5px 0 !important;
}

#personal-toolbar-empty-description,
toolbarbutton.bookmark-item:not(.subviewbutton) {
  padding: 4px 7px !important;
}

:root:-moz-window-inactive {
  --sidebar-background-color: var(--bg1) !important;
#PersonalToolbar {
  background-color: var(--bg1) !important;
}

#browser {
  #tabbrowser-tabpanels {
  background-color: var(--bg1) !important;
}
}

#nav-bar {
  background: transparent !important;
}
}

:root[inDOMFullscreen] {
#TabsToolbar,
#PersonalToolbar {
  display: none;
}

#tabbrowser-tabbox {
  margin: 0 !important;
}
}

:root[inFullscreen] {
#nav-bar {
  padding-left: 0 !important;
}

#TabsToolbar {
  margin-left: 364px !important;
}

#urlbar {
  left: 146px !important;
}
}

:root[customizing] {
#PanelUI-menu-button,
#nav-bar-overflow-button,
#unified-extensions-button {
  position: unset !important;
  scale: 1;
}

.panel-arrow, #PersonalToolbar,
#nav-bar [id^=wrapper-customizableui-special-spring] {
  display: none !important;
}

#nav-bar {
  max-height: 52px !important;
}
}

:root[privatebrowsingmode] {
#customization-container,
#browser {
  background: transparent !important;
}

#tabbrowser-tabs[orient="horizontal"] {
  margin-inline-start: 4px !important;
}
}

/* urlbar */

#urlbar {
  --urlbar-box-bgcolor: var(--button-hover-bgcolor) !important;
  position: fixed !important;
  left: 225px !important;
  top: 10.5px !important;
  max-width: 219px !important;
  margin-top: 0 !important;
  transition: margin-top .25s !important;
}

#urlbar-container {
  -moz-window-dragging: drag;
}

#urlbar-search-mode-indicator {
  margin-top: 3px !important;
  height: 22px !important;
}

#urlbar-background {
  height: 30px !important;
  border: none !important;
  border-radius: 6px !important;
  background: var(--button-hover-bgcolor) !important;
  transition: background .5s !important;
}

#urlbar:hover #urlbar-background {
  background: var(--button-active-bgcolor) !important;
  box-shadow: none !important;
  transition: background .5s !important;
}

#urlbar[open] #urlbar-background {
  transition: none !important;
}

.urlbar-input-container {
  padding: 0 !important;
  height: 30px !important;
  border-radius: 6px !important;
}

#urlbar-input::placeholder,
.searchbar-textbox::placeholder {
  font-size: 12.5px !important;
  text-align: left !important;
}

#urlbar-input {
  text-align: center !important;
  margin-bottom: 1px !important;
}

.urlbar-input-container[pageproxystate=invalid] .urlbar-input {
  mask-image: linear-gradient(to left, transparent, #fff 10ch);
}

#urlbar[focused] > .urlbar-input-container {
  outline: none !important;
}

#urlbar > #urlbar-background {
  outline-style: solid !important;
  outline-color: transparent !important;
  outline-width: 18px !important;
}

#urlbar[focused]:not([suppress-focus-border]) > #urlbar-background {
  outline-color: var(--outline-color) !important;
  outline-width: 3px !important;
  outline-offset: -1px !important;
  transition: all .3s cubic-bezier(.8, 0, 0, .8) !important;
}

#urlbar:not([breakout][breakout-extend]) {
  transform: none !important;
}

#urlbar:not([breakout][breakout-extend]) #identity-icon-label {
  display: none !important;
}

#urlbar[breakout][breakout-extend] {
  position: fixed !important;
  top: 20vh !important;
  left: 18vw !important;
  width: 65vw !important;
  max-width: unset !important;
  animation-name: panel-grow;
  animation-duration: 250ms;
  margin-top: 25px !important;
  transition: none !important;

#urlbar-input,
#urlbar-input::placeholder {
  font-size: 21px !important;
}

.urlbar-input-container {
  height: 50px !important;
& > :is(box, image) {
  margin-top: 10px !important;
}
}

.urlbarView-row-inner {
  flex-wrap: nowrap !important;
}
  
.urlbarView-no-wrap {
  max-width: 50% !important;
  flex-basis: 0 !important;
}

.urlbarView-row[has-url] .urlbarView-url {
  margin-left: 0 !important;
}

.urlbarView-row[has-url] .urlbarView-title-separator {
  display: block !important;
}

#urlbar-search-mode-indicator {
  margin-top: 13px !important;
}
}

#urlbar[breakout][breakout-extend] #urlbar-background {
  background-color: var(--bg4) !important;
  backdrop-filter: blur(30px) !important;
  box-shadow: var(--bs1) !important;
}

:has(#urlbar[breakout][breakout-extend]) {
#tabbrowser-tabs[orient="horizontal"] {
  margin-left: -223px !important;
  transition: margin-left .25s !important;
}

#tabbrowser-tabs[orient="vertical"] {
  margin-top: 0 !important;
  transition: margin-top .25s !important;
}

#urlbar-background {
  height: unset !important;
}
}

:has(#urlbar[usertyping]) {
#urlbar {
  position: fixed !important;
  top: 20vh !important;
  left: 18vw !important;
  width: 65vw !important;
  max-width: unset !important;
  margin-top: 25px !important;
}

#urlbar-background {
  background-color: var(--bg4) !important;
  backdrop-filter: blur(30px) !important;
  box-shadow: var(--bs1) !important;
  height: 50px !important;
}

.urlbar-input-container {
  height: 50px !important;
& > :is(box, image) {
  margin-top: 10px !important;
}
}

#urlbar-input {
  font-size: 21px !important;
}

#urlbar[focused] #urlbar-background {
  box-shadow: var(--bs1) !important;
}

.urlbar-revert-button {
  margin-top: 10px !important;
  margin-right: 5px !important;
}

#urlbar-search-mode-indicator {
  margin-top: 13px !important;
}

#tabbrowser-tabs[orient="horizontal"] {
  margin-left: -223px !important;
}
}

.urlbarView-body-outer {
  padding: 0 8px !important;
}

.urlbarView-body-inner {
  border: 0 !important;
  border-top: 1px solid rgba(105, 105, 105, .2) !important;
}

.search-one-offs {
  background: transparent !important;
  border: none !important;
  padding: 8px !important;
}

.urlbar-page-action {
  height: 28px !important;
  border-radius: 6px !important;
  padding: 6px !important;
  -moz-window-dragging: no-drag;
}

.urlbar-page-action:not(#star-button-box) {
  margin-inline-end: calc(-16px - 2 * var(--urlbar-icon-padding));
  opacity: 0;
  transition: .2s;
}

#urlbar[open] .urlbar-page-action,
#urlbar:hover .urlbar-page-action,
.urlbar-page-action[open] {
  opacity: 1;
  margin-inline-end: 0 !important;
}

:has(#page-action-buttons > *[open]) {
.urlbar-page-action {
  opacity: 1;
  margin-inline-end: 0 !important;
}
}

:has(#identity-permission-box > *[open]) {
#identity-permission-box {
  opacity: 1;
  margin-inline-start: 0 !important;
}
}

#identity-permission-box, #notification-popup-box, #tracking-protection-icon-container {
  margin-inline-start: calc(-16px - 2 * var(--urlbar-icon-padding));
  opacity: 0;
  transition: .2s;
}

#urlbar[open] #tracking-protection-icon-container,
#urlbar:hover #tracking-protection-icon-container,
#tracking-protection-icon-container[open] {
  opacity: 1;
  margin-inline-start: 0 !important;
}

#urlbar[open] #identity-permission-box,
#urlbar[open] #notification-popup-box,
#urlbar:hover #identity-permission-box,
#urlbar:hover #notification-popup-box,
#identity-permission-box[open],
#notification-popup-box[open] {
  opacity: 1;
  margin-inline-start: 0 !important;
}

.urlbar-page-action:active,
#identity-permission-box:active,
#notification-popup-box:active,
#tracking-protection-icon-container:active {
  opacity: unset;
}

#urlbar:-moz-window-inactive .urlbar-page-action:not(#star-button-box),
#urlbar:-moz-window-inactive #identity-permission-box,
#urlbar:-moz-window-inactive #notification-popup-box {
  opacity: 0 !important;
}

#urlbar:-moz-window-inactive:hover .urlbar-page-action:not(#star-button-box),
#urlbar:-moz-window-inactive:hover #identity-permission-box,
#urlbar:-moz-window-inactive:hover #notification-popup-box {
  opacity: unset !important;
}

#urlbar-zoom-button {
  background: var(--button-hover-bgcolor) !important;
}

#urlbar:-moz-window-inactive {
  * { opacity: 78%; }
}

#urlbar[focused] > #urlbar-background,
#searchbar:focus-within {
  box-shadow: none !important;
}

.urlbarView-row:is([type=bookmark], [pinned]) > .urlbarView-row-inner > .urlbarView-no-wrap > .urlbarView-type-icon {
  display: none !important;
}

#searchbar {
  min-height: 28px !important;
  background: var(--button-hover-bgcolor) !important;
  border-radius: 6px !important;
  border: none !important;
}

.search-go-button, .search-panel-header, .searchbar-separator {
  display: none !important;
}

#PopupSearchAutoComplete {
  --panel-background: var(--bg2) !important;
  --panel-border-color: transparent !important;
}

/* button */

.toggle-button { --toggle-dot-background-color-on-pressed: #fff !important; }
#blocked-permissions-container, #picture-in-picture-button,
#urlbar-go-button, .private-browsing-indicator-with-label,
#reset-pbm-toolbar-button, #nav-bar toolbarspring,
#firefox-view-button, #fxa-toolbar-menu-button,
#userContext-icons, #userContext-label,
#scrollbutton-up, #scrollbutton-down,
.sharing-icon {
  display: none !important;
}

.tab-close-button, .tab-icon-overlay, .tab-icon-image, span[part="button"],
.toolbarbutton-1, #identity-permission-box,
#notification-popup-box, #star-button,
#translations-button-circle-arrows,
#reader-mode-button > .urlbar-icon,
#translations-button > #translations-button-icon,
#shopping-sidebar-button > .urlbar-icon , #identity-box,
#tracking-protection-icon-container {
  fill: light-dark(#525252, #c9c9cb) !important;
  fill-opacity: 1 !important;
}

.tab-close-button:active, .tab-icon-overlay:active, span[part="button"]:active,
.toolbarbutton-1:active, #identity-permission-box:active,
#notification-popup-box:active, #star-button:active,
#translations-button-circle-arrows:active,
#reader-mode-button:active > .urlbar-icon,
#translations-button:active > #translations-button-icon,
#shopping-sidebar-button:active > .urlbar-icon , #identity-box:active,
#tracking-protection-icon-container:active {
  fill: light-dark(#2d2d2d, #ececec) !important;
}

#viewButton {
  border: none !important;
  background: none !important;
  border-radius: 4px !important;
}

#viewButton:hover {
  background-color: var(--button-hover-bgcolor) !important;
}

#viewButton[open] {
  background-color: var(--button-active-bgcolor) !important;
}

#downloads-indicator-progress-outer {
  border: 1.5px solid light-dark(#525252, #c9c9cb) !important;
  width: 17px !important;
  height: 17px !important;
}

.webextension-browser-action {
  border-radius: 6px !important;
  margin-bottom: 6.5px !important;
  width: 30px !important;
}

#nav-bar .toolbarbutton-1 {
  max-height: 30px !important;
  margin-top: 1px !important;
}

#nav-bar .toolbarbutton-1 > .toolbarbutton-icon {
  height: 30px !important;
  width: 30px !important;
  padding: 6px !important;
  border-radius: 6px !important;
}

#PanelUI-menu-button > .toolbarbutton-badge-stack {
  height: 30px !important;
  width: 30px !important;
  border-radius: 6px !important;
  padding: 6px 5.5px 0 !important;
}

#PanelUI-menu-button .toolbarbutton-icon {
  height: 19px !important;
  width: 19px !important;
}

#nav-bar {
#downloads-button > .toolbarbutton-badge-stack {
  height: 30px !important;
  width: 30px !important;
  border-radius: 6px !important;
  padding: 6.5px 5.5px 5.5px 6.5px !important;
}
}

#page-action-buttons {
  margin-right: 0 !important;
  margin-bottom: 0 !important;
}

#identity-box {
  height: 28px !important;
  border-radius: 6px !important;
}

#identity-box:hover {
  background: rgba(70, 70, 70, .1) !important;
}

.identity-box-button {
  background: none !important;
}

#notification-popup-box {
  margin-top: 0 !important;
  background: none !important;
}

#tracking-protection-icon-container {
  height: 28px !important;
  border-radius: 6px !important;
}

#star-button[starred], #translations-button-circle-arrows,
#reader-mode-button[readeractive] > .urlbar-icon,
#translations-button[translationsactive] > #translations-button-icon,
#shopping-sidebar-button[shoppingsidebaropen] > .urlbar-icon {
  fill: light-dark(#525252, #c9c9cb) !important;
}

:has(#star-button-box[open]) {
#star-button[starred] {
  animation-name: urlbar-zoom-reset-pulse;
  animation-duration: 250ms;
}
}

#appMenu-fullscreen-button2 .toolbarbutton-icon {
  background: none !important;
}

#appMenu-fullscreen-button2:hover {
  background: var(--button-hover-bgcolor) !important;
}

#appMenu-fullscreen-button2:active {
  background: var(--button-active-bgcolor) !important;
}

#appMenu-zoom-controls {
  border-top: 1px solid var(--bg3) !important;
}

.checkbox-check:not([native]) {
  appearance: none !important;
  background-color: transparent !important;
  border-radius: 2px !important;
  border: 2px solid rgba(165, 165, 165, .8) !important;
  &[checked] {
  background-color: light-dark(#4481f2, #1280fd) !important;
  background-image: url("resources/check.svg") !important;
  border: none !important;
  &:hover:active { background-color: light-dark(#0a4eb8, #417bde) !important; }
}
}

/* tabs */

.tab-background {
  border: none !important;
  box-shadow: none !important;
  border-radius: 6px !important;
}

.tabbrowser-tab .tab-close-button {
  margin-left: -5px;
  order: 1;
}

.tabbrowser-tab .tab-label-container {
  margin-left: 5px;
  order: 3;
}

.tabbrowser-tab:not([pinned]):hover .tab-icon-image,
.tabbrowser-tab[selected]:not(:hover) .tab-close-button {
  display: none;
}

.tabbrowser-tab:not([pinned]):hover .tab-label-container {
  margin-left: 11.5px;
}

tab > stack {
  margin: 0 1px !important;
}

tab .tab-label {
  font-size: 13px !important;
  margin-bottom: 1px !important;
}

#tabbrowser-tabs {
  --tab-min-width: 88px !important;
  margin-bottom: -1px !important;
  border-inline-start: none !important;
  transition: margin-left .25s !important;
}

#tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs])[orient="horizontal"] > #tabbrowser-arrowscrollbox > .tabbrowser-tab:nth-child(1 of :not([pinned], [hidden])) {
  margin-inline-start: 0 !important;
}

#tabbrowser-tabs[movingtab] {
  margin-bottom: -16px !important;
}

#nav-bar #alltabs-button {
  list-style-image: url("resources/alltabs.svg") !important;
> .toolbarbutton-badge-stack {
  height: 30px !important;
  width: 30px !important;
  padding: 6px 0 0 6px !important;
  border-radius: 6px !important;
> .toolbarbutton-icon {
  height: 18px !important;
  width: 18px !important;
  margin: unset !important;
}
}
}

.tabbrowser-tab:not([selected]) .tab-close-button {
  display: none;
}

.tabbrowser-tab:not([pinned]):hover .tab-close-button {
  display: flex !important;
}

.tab-background:not([selected]) {
  background: var(--button-hover-bgcolor) !important;
  transition: background .5s !important;
}

.tab-background[selected] {
  background: light-dark(rgba(70, 70, 70, .18), rgba(170, 170, 170, .4)) !important;
}

.tabbrowser-tab:hover .tab-background {
  background: var(--button-active-bgcolor) !important;
  transition: background .5s !important;
}

.tab-audio-button {
  order: 10;
  margin-right: -5px !important;
}

.tab-icon-overlay {
  scale: .7;
  &:hover { scale: .8; }
  &:is([soundplaying], [muted], [activemedia-blocked]) {
  background-color: transparent !important;
  border: none !important;
  &:not([pinned]) {
  background-size: 16px !important;
}
  &:hover {
  background-color: var(--button-hover-bgcolor) !important;   
}
  &:active {
  background-color: var(--button-active-bgcolor) !important;   
}
}
  :is(
  :root[uidensity=compact],
  #tabbrowser-tabs[secondarytext-unsupported],
  :root:not([uidensity=compact]) #tabbrowser-tabs:not([secondarytext-unsupported]) .tabbrowser-tab:hover
  ) .tab-icon-stack[indicator-replaces-favicon] > :not(&),
  :root:not([uidensity=compact]) #tabbrowser-tabs:not([secondarytext-unsupported]) .tabbrowser-tab:not(:hover) &[indicator-replaces-favicon] {
  opacity: 1 !important;
}
}

.tabbrowser-tab:not([pinned]):is([soundplaying], [muted], [activemedia-blocked]) .tab-label-container {
  margin-left: 8.5px;
}

.tabbrowser-tab:hover:not([pinned]):is([soundplaying], [muted], [activemedia-blocked]) .tab-label-container {
  margin-left: 11.5px;
}

.tab-secondary-label {
  display: none !important;
}

.tabbrowser-tab[usercontextid] > .tab-stack > .tab-background > .tab-context-line {
  min-height: 18px !important;
  max-width: 2px !important;
  margin: 6px 0 0 0 !important;
  border-radius: 2px !important;
}

#tab-preview-panel {
  --panel-padding: 0 !important;
}

@media not -moz-pref("sidebar.verticalTabs") {
.tabbrowser-tab[selected]:not([pinned]) {
  min-width: 138px !important;
}

.tabbrowser-tab[pinned] .tab-icon-image {
  margin-right: 5.5px !important;
}

.tab-content[pinned] {
  margin-right: 5px;
  padding-left: 8px !important;
  background-image: url("resources/pinned.svg");
  background-repeat: no-repeat;
  background-position: right bottom 10px;
  -moz-context-properties: fill, fill-opacity;
  fill: currentColor;
  fill-opacity: .6;
  & .tab-label-container {
  margin-right: 6px;
  mask-image: linear-gradient(to left, transparent, #fff 3ch);
}
}

.tab-background {
  max-height: 30px !important;
  min-height: 30px !important;
}

#tabs-newtab-button > .toolbarbutton-icon,
#new-tab-button > .toolbarbutton-icon {
  height: 32px !important;
  width: 32px !important;
  padding: 5px 7px !important;
  border-radius: 6px !important;
}

#tabs-newtab-button, #new-tab-button {
  margin: 0 0 0 1px !important;
}

#new-tab-button > .toolbarbutton-icon,
#tabs-newtab-button > .toolbarbutton-icon {
  background: none !important;
}

#new-tab-button,
#tabs-newtab-button {
  width: 30px;
  margin: 4px 3px -3px 3px !important;
  max-height: 30px !important;
  min-height: 30px !important;
  border-radius: 6px !important;
}

#tabs-newtab-button {
  margin: 4px 3px 3px 3px !important;
}

#new-tab-button:hover,
#tabs-newtab-button:hover {
  background: var(--button-hover-bgcolor) !important;
}

#new-tab-button:active,
#tabs-newtab-button:active {
  background: var(--button-active-bgcolor) !important;
}

.tab-group-label {
  color: #fff !important;
  outline: none !important;
  min-width: 5px !important;
  font-weight: normal !important;
tab-group[collapsed] > .tab-group-label-container > & {
  background-color: light-dark(var(--tab-group-color-invert), var(--tab-group-color)) !important;
}
}

.tab-group-label-container {
tab-group:not([collapsed]) > &::after {
  background-color: transparent !important;
}
}

.tab-group-line {
  margin: 0 !important;
  border-radius: 50px !important;
  width: 5px !important;
  height: 5px !important;
}
}

.tabbrowser-tab:active,
#tabs-newtab-button:active,
#vertical-tabs-newtab-button:active,
.tools-and-extensions > moz-button:active {
  transform: scale(.98);
}

:has(.tab-icon-overlay:active, .tab-audio-button:active, .tab-close-button:active) {
.tabbrowser-tab {
  transform: none;
}
}
  
/* popup */

menupopup, panel[type="arrow"] {
  appearance: menupopup !important;
  --panel-border-radius: 6px !important;
  --panel-padding: 6px !important;
  --panel-separator-color: var(--bg3) !important;
  --arrowpanel-background: var(--bg2) !important;
  --arrowpanel-border-color: transparent !important;
  --arrowpanel-color: light-dark(#000, #fff) !important;
}

panel[type="arrow"] {
  --panel-background: light-dark(rgba(255, 255, 255, .55), rgba(15, 15, 12, .55)) !important;
  --arrowpanel-background: transparent !important;
  --arrowpanel-border-radius: 0 !important;
}

@keyframes panel-grow {
  0% {
    transform: scaleX(.96) scaleY(.95);
  }
  100% {
    transform: scale(1.0);
  }
}

@keyframes slide-in {
  0%, 30% {
    translate: 100%;
    opacity: 0;
  }
  100% {
    translate: 0;
    opacity: 1;
  }
}

@keyframes slide-out {
  100% {
    translate: 100%;
    opacity: 0;
  }
  0% {
    translate: 0;
    opacity: 1;
  }
}

panelmultiview, popupnotification {
  animation-name: panel-grow;
  animation-duration: 250ms;
}

.panel-arrowcontent {
  border: none !important;
}

.panel-arrow {
  stroke: transparent !important;
}

.proton-zap {
  border-image: none !important;
}

#toolbar-context-toggle-vertical-tabs + menuseparator,
.panel-footer toolbarseparator, .panel-header + toolbarseparator,
#identity-popup-mainView-panel-header + toolbarseparator,
#permission-popup-mainView-panel-header + toolbarseparator,
#protections-popup-mainView-panel-header-section + toolbarseparator {
  display: none !important;
}

menupopup,
.popup-internal-box,
#PopupAutoComplete > .autocomplete-richlistbox,
.menupopup-arrowscrollbox {
  background: light-dark(rgba(255, 255, 255, .55), rgba(15, 15, 12, .55)) !important;
}

#tabContextMenu .menu-iconic-left,
#contentAreaContextMenu .menu-iconic-left {
  display: none;
}

menuitem, menu {
  appearance: none !important;
  border-radius: 4px !important;
  height: 22px !important;
}

menu {
  margin: 2px 0 !important;
}

menupopup > menuitem[selected] {
  background: none !important;
  color: inherit !important;
}

menupopup .bookmark-item {
  margin: 2px 0 !important;
  height: 22px !important;
}

menupopup menu:hover:not([disabled=true]),
menupopup menuitem:hover:not([disabled=true]),
menupopup menu[_moz-menuactive]:not([disabled=true]),
menupopup menuitem[_moz-menuactive]:not([disabled=true]),
.protections-popup-footer-button:not([disabled=true]):hover,
#protections-popup-show-report-stack:hover .protections-popup-footer-button,
.protections-popup-category:not([disabled=true]):hover,
.identity-popup-content-blocking-category:not([disabled=true]):hover,
#PlacesToolbar .bookmark-item:is(:hover, [open], [_moz-menuactive]),
#downloadsPanel-mainView .download-state:hover {
  background: var(--button-hover-bgcolor) !important;
  color: inherit !important;
}

toolbarseparator, menuseparator::before {
  border-top: 1px solid var(--bg3) !important;
}

menupopup menuseparator {
  border: none !important;
  margin: 0 !important;
}

toolbarseparator[orient="vertical"] {
  margin: 0 4px !important;
}

.dialogBox {
  margin-top: 80px !important;
  backdrop-filter: blur(30px) !important;
  box-shadow: var(--bs1) !important;
  animation-name: panel-grow;
  animation-duration: 250ms;
}

#window-modal-dialog::backdrop {
  background: none !important;
}

window[role="dialog"] {
  background-color: var(--bg4) !important;
}

#editBookmarkPanelContent > input,
#editBookmarkPanelContent > hbox > input {
  appearance: none !important;
  background-color: var(--button-hover-bgcolor) !important;
  border: none !important;
  box-shadow: none !important;
  padding: 0 12px !important;
  height: 20px !important;
  border-radius: 2px !important;
  margin-top: 2px !important;
  margin-bottom: 2px !important; 
}

#unified-extensions-view .panel-header,
#unified-extensions-view .panel-header + toolbarseparator,
#unified-extensions-view .unified-extensions-item-menu-button.subviewbutton {
  display:none !important;
}

#unified-extensions-view {
  --uei-icon-size: 16px !important;
  width: 22em !important;
}

@media -moz-pref("widget.macos.native-context-menus") {
panel[type="arrow"] {
  --panel-background: transparent !important;
}

menupopup,
.popup-internal-box,
#PopupAutoComplete > .autocomplete-richlistbox,
.menupopup-arrowscrollbox {
  background: transparent !important;
}

:root:not([chromehidden~="toolbar"]):has(#sidebar-main[hidden]) #sidebar-main,
window[role="dialog"], #PersonalToolbar, .findbar-container, #statuspanel-label,
#urlbar:is([breakout][breakout-extend], [usertyping]) #urlbar-background {
  background-color: light-dark(rgba(255, 255, 255, .55), rgba(25, 25, 25, .65)) !important;
}
}

/* misc */

@-moz-document url("chrome://browser/content/browser.xhtml") {
:root:-moz-window-inactive body {background: var(--bg1) !important;}

tree {
  background-color: var(--in-content-box-background) !important;
  border: none !important;
}

#editBookmarkPanelContent > input,
#editBookmarkPanelContent > hbox > input {
  height: 35px !important;
  border-radius: 4px !important;
}

:root#main-window {
  min-width: 1000px !important;
  appearance: -moz-sidebar !important;
}

:root#main-window[chromehidden~="toolbar"] {
  min-width: unset !important;

.browser-toolbar {
  display: none !important;
}

#tabbrowser-tabbox browser {
  margin: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}
}
}

@-moz-document url("chrome://browser/content/aboutDialog.xhtml") {
#aboutDialogContainer {
  background: #282828 !important;
}

#bottomBox {
  background: #333 !important;
}
}

treechildren::-moz-tree-row {
  outline: none !important;
  border-radius: 2px !important;
}

treechildren::-moz-tree-row(selected) {
  background: var(--button-hover-bgcolor) !important;
}

.item.selected > .item-title-container {
  background: var(--button-hover-bgcolor) !important;
  color: light-dark(#000, #fff) !important;
  border-radius: 2px !important;
}

treechildren::-moz-tree-image(selected),
treechildren::-moz-tree-twisty(selected),
treechildren::-moz-tree-cell-text(selected) {
  color: light-dark(#000, #fff) !important;
}

.titleIcon {
  background-color: transparent !important;
}

richlistbox {
  border: none !important;
}

#customization-panelWrapper > .panel-arrowcontent,
#customization-container {
  background-color: transparent !important;
}

#customization-panelWrapper > .panel-arrowbox > .panel-arrow[side="top"] {
  display: none !important;
}

#tab-notification-deck {
  position: fixed;
  top: 49px;
  right: 6px;
  z-index: 9;
}

#statuspanel-label {
  border: none !important;
  border-radius: 0 !important;
  margin: 8px !important;
  border-bottom-left-radius: 8px !important;
#statuspanel:not([mirror]) > &:-moz-locale-dir(rtl),
#statuspanel[mirror] > &:-moz-locale-dir(ltr) {
  border-bottom-left-radius: 0 !important;
  border-bottom-right-radius: 8px !important;
}
}

.findbar-container, #statuspanel-label {
  background-color: var(--bg4) !important;
  backdrop-filter: blur(30px) !important;
  box-shadow: var(--bs1) !important;
@media (-moz-platform: windows) {
  box-shadow: 0 15px 25px rgba(0, 0, 0, .25), 0 0 0 .5px rgba(0, 0, 0, .15) !important;
}
}

@media (prefers-color-scheme: dark) {
:root:not([inDOMFullscreen]) {
#tabbrowser-tabbox browser {
  box-shadow: 0 1.5px 6px #0000004d !important;
}
}

#urlbar[breakout][breakout-extend] #urlbar-background,
.dialogBox, #PersonalToolbar {
  outline: 1px solid rgba(235, 235, 235, .2) !important;
  outline-offset: -1px !important;
  box-shadow: var(--bs2) !important;
}

.findbar-container, #statuspanel-label {
  outline: 1px solid rgba(235, 235, 235, .2) !important;
  outline-offset: -1px !important;
  box-shadow: var(--bs2) !important;
@media (-moz-platform: windows) {
  box-shadow: 0 15px 25px rgba(0, 0, 0, .25), 0 0 0 .5px rgba(0, 0, 0, .5) !important;
}
}

#identity-box:hover {
  background: rgba(170, 170, 170, .5) !important;
}

.swipe-nav-icon-circle-outline,
.swipe-nav-icon-arrow {
  fill: #1280fd !important;
}

.swipe-nav-icon-circle {
  fill: #2d2d2d !important;
}

.swipe-nav-icon.will-navigate {
> .swipe-nav-icon-circle-outline,
> .swipe-nav-icon-arrow {
  fill: #2d2d2d !important;
}

> .swipe-nav-icon-circle {
  fill: #1280fd !important;
}
}
}

.devtools-side-splitter,
.devtools-horizontal-splitter {
  display: none !important;
}

.devtools-toolbox-side-iframe {
  &:first-child { margin-right: 0 !important; }
  &:last-child { margin-left: 0 !important; }
}

findbar {
  position: absolute !important;
  top: 3px;
  right: -8px;
  width: calc(100% - 15px) !important;
  height: 90px !important;
  border: none !important;
  background: none !important;
  flex-direction: row-reverse;
  white-space: nowrap;
  animation-name: slide-in;
  animation-duration: 250ms;
&:is([hidden="true"]) {
  animation-name: slide-out;
}
}

findbar::after {
  content: "";
  display: flex;
  flex-grow: 100;
}

.findbar-closebutton {
  position: fixed;
  right: 18px;
  margin-top: 7px !important;
  background: none !important;
  z-index: 1;
}

.findbar-closebutton > image {
  padding: 5px;
  max-height: 24px !important;
  max-width: 24px !important;
}

.findbar-closebutton:hover > image {
  background: var(--button-hover-bgcolor);
  border-radius: 5px;
}

.findbar-closebutton:active > image {
  background: var(--button-active-bgcolor);
}

.findbar-container {
  height: 42px !important;
  margin-right: 25px;
  overflow-inline: visible !important;
  flex-direction: row-reverse;
  border-radius: 8px !important;
}

.findbar-container > hbox {
  margin-right: 30px;
}

.findbar-textbox, .findbar-textbox:-moz-window-inactive {
  background: none !important;
  width: 100px !important;
  border: none !important;
}

.findbar-textbox {
  outline-style: solid !important;
  outline-color: transparent !important;
  outline-width: 5px !important;
}

.findbar-textbox[focused],
.findbar-textbox:focus {
  outline-color: var(--outline-color) !important;
  outline-width: 3px !important;
  transition: all .3s cubic-bezier(1, 0, 0, 1) !important;
  box-shadow: none !important;
}

#search-box, xul|search-textbox {
  appearance: none !important;
  border-bottom: 1px solid rgba(185, 185, 185, .1) !important;
  border-radius: 6px !important;
  height: 28px !important;
  max-height: 28px !important;
  padding: 6px !important;
  background-color: light-dark(rgba(102, 105, 108, .1), rgba(165, 165, 165, .1)) !important;
}

#search-box[focused], xul|search-textbox[focused] {
  outline: 3px solid var(--outline-color) !important;
  outline-offset: -1px;
  transition: outline 100ms ease-out;
}

#searchbar, 
#search-box,
xul|search-textbox,
[type="text"] {
  outline-style: solid !important;
  outline-color: transparent !important;
  outline-width: 18px !important;
}

#searchbar:focus-within,
#search-box[focused],
xul|search-textbox[focused],
[type="text"]:focus-visible {
  outline-color: var(--outline-color) !important;
  outline-width: 3px !important;
  outline-offset: -1px !important;
  transition: all .3s cubic-bezier(.8, 0, 0, .8) !important;
}

@-moz-document url("chrome://browser/content/sidebar/sidebar-history.html"), url("chrome://browser/content/sidebar/sidebar-syncedtabs.html") {
input {
  border: none !important;
  border-bottom: 1px solid rgba(185, 185, 185, .1) !important;
  outline-style: solid !important;
  outline-color: transparent !important;
  outline-width: 18px !important;
  background-color: light-dark(rgba(102, 105, 108, .1), rgba(165, 165, 165, .1)) !important;
}

input:focus {
  outline-color: var(--outline-color) !important;
  outline-width: 3px !important;
  outline-offset: -1px !important;
  transition: all .3s cubic-bezier(.8, 0, 0, .8) !important;
}  
}

@-moz-document url("chrome://browser/content/sidebar/sidebar-customize.html") {
[data-l10n-id="sidebar-show-on-the-right"] {
  display: none !important;
}
}

#urlbar:hover #tracking-protection-icon-container:not(:hover, :active, [open])::after {
  content: "";
  position: absolute;
  display: block;
  height:  18px ;
  right: -1px;
  top: 5px;
  border-right: 1px solid color-mix(in srgb, currentColor 20%, transparent);
}

.sidebar-panel {
  background-color: transparent !important;
}

#sidebar-main {
  max-width: 221px !important;
}

#sidebar-box:-moz-window-inactive {
  opacity: .5 !important;
}

:root[sidebar-expand-on-hover] {
#sidebar-main {
  background-color: transparent !important;
  transition: none !important;
}

:has(#urlbar[breakout][breakout-extend], [usertyping]) {
#tabbrowser-tabs:not([haspinnedtabs]) {
  margin-top: -7.5px !important;
}
}

.tabbrowser-tab[pinned] .tab-icon-image {
  margin-left: 6px;
}

.tabbrowser-tab:is([soundplaying], [muted], [activemedia-blocked]):hover .tab-icon-image {
  display: unset;
}

#tabbrowser-tabs[orient="vertical"]:not([expanded]) .tab-close-button, 
.tabbrowser-tab[pinned] .tab-close-button {
  display: none !important;
}

#tabbrowser-tabbox {
  clip-path: inset(-50px 0 0 0);
  transition: clip-path 200ms;
  margin-left: 0 !important;
}

:has(#tabbrowser-tabs[expanded]) {
#tabbrowser-tabbox {
  clip-path: inset(-50px 0 0 147px);
  margin-left: 74px !important;
}

#vertical-pinned-tabs-container {
.tab-content {
  margin-left: -6px !important;
}

.tab-label-container {
  margin-left: 1px !important;
}
}

:has(#sidebar-box:not([hidden])) {
#tabbrowser-tabbox {
  margin-left: 0 !important;
}
}
}

:has(#sidebar-box:not([hidden])) {
#tabbrowser-tabbox {
  clip-path: inset(-50px 0 0 0);
}
}

#sidebar-box {
&:not([sidebar-positionend]) {
&[sidebar-panel-open][sidebar-launcher-hovered][sidebar-launcher-expanded],
&[sidebar-ongoing-animations][sidebar-panel-open] {
  margin-inline-start: 218px !important;
}
}
}
}

/* icons */

#back-button {
  list-style-image: url("resources/left.svg") !important;
}

#forward-button {
  list-style-image: url("resources/right.svg") !important;
}

#reload-button {
  list-style-image: url("resources/reload.svg") !important;
}

#stop-button {
  list-style-image: url("resources/stop.svg") !important;
}

#new-tab-button, #tabs-newtab-button {
  list-style-image: url("resources/newtab.svg") !important;
}

#unified-extensions-button {
  list-style-image: url("resources/extension.svg") !important;
}

#tracking-protection-icon {
  list-style-image: url(chrome://browser/skin/tracking-protection.svg);
}

#sidebar-button {
  list-style-image: url("resources/sidebars.svg") !important;
}

#sanitizeEverythingWarningIcon {
  list-style-image: url("chrome://global/skin/icons/warning.svg") !important;
  -moz-context-properties: fill;
  fill: #f9c63b;
  width: 48px !important;
  height: 48px !important;
}

.tab-icon-image[src="chrome://branding/content/icon32.png"],
.tab-icon-image[src="chrome://browser/skin/privatebrowsing/favicon.svg"] {
  content: url("chrome://devtools/skin/images/browsers/firefox.svg");
}

#identity-box[pageproxystate="valid"].chromeUI #identity-icon {
  list-style-image: url("chrome://devtools/skin/images/browsers/firefox.svg") !important;
}

.textbox-search-sign {
  display: inherit !important;
  width: 16px !important;
  height: 16px !important;
  opacity: .8 !important;
  -moz-context-properties: fill;
  fill: currentColor;
}

/* verticalTabs */

@media -moz-pref("sidebar.revamp") {
#sidebar {
  box-shadow: none !important;
  background-color: var(--button-bgcolor) !important;
}

#sidebar-main {
  -moz-window-dragging: drag;
}

#sidebar-box {
  -moz-window-dragging: no-drag;
  max-width: 280px !important;
  min-width: 280px !important;
&[sidebarcommand="viewGenaiChatSidebar"] {
  max-width: 400px !important;
  min-width: 400px !important;
}
}

.sidebar-splitter {
  cursor: default !important;
}

.tools-and-extensions {
  -moz-window-dragging: no-drag;
&:-moz-window-inactive {
  opacity: .5 !important;
}
}

span > img:is([src="chrome://browser/skin/history.svg"], [src="chrome://browser/skin/synced-tabs.svg"], [src="chrome://browser/skin/bookmark-hollow.svg"], [src="chrome://global/skin/icons/settings.svg"], [src="chrome://global/skin/icons/highlights.svg"]) {
  fill: light-dark(#525252, #c9c9cb) !important;
}

span:active > img:is([src="chrome://browser/skin/history.svg"], [src="chrome://browser/skin/synced-tabs.svg"], [src="chrome://browser/skin/bookmark-hollow.svg"], [src="chrome://global/skin/icons/settings.svg"], [src="chrome://global/skin/icons/highlights.svg"]) {
  fill: light-dark(#2d2d2d, #ececec) !important;
}

:has(#sidebar-main:not([hidden])) {
#PersonalToolbar {
  margin-left: 57.5px !important;
  width: calc(100% - 65.5px);
}
}

:has(#sidebar-box:not([hidden])) {
#PersonalToolbar {
  margin-left: 329.5px !important;
  width: calc(100% - 337.5px);
}

#sidebar-box {
  margin-right: -8px !important;
}
}

:has(#sidebar-box[sidebarcommand="viewGenaiChatSidebar"]:not([hidden])) {
#PersonalToolbar {
  margin-left: 449px !important;
  width: calc(100% - 457px);
}
}
}

@media -moz-pref("sidebar.verticalTabs") {
.titlebar-buttonbox-container {
  left: 2px;
  top: 14.5px;
}

.titlebar-buttonbox::before {
  content: "";
  position: absolute;
  top: -8px;
  left: -16px;
  width: 82px;
  height: 200%;
}

#tab-notification-deck {
  top: 6px;
}

#toolbar-context-customize-sidebar {
  display: flex !important;
}

#sidebar-main {
  margin-top: 25.5px !important;
  transition: .25s !important;
}

#sidebar-box {
  margin-top: -45.5px !important;
  margin-bottom: 2px !important;
  margin-left: 6px !important;
}

.tools-and-extensions {
  margin-bottom: 5px !important;
}

.tools-and-extensions > moz-button:not([extension]) {
  padding-left: var(--padding) !important;
}

.extensions, .customize-extensions-heading,
.tools-and-extensions > moz-button[extension],
button:has([src="chrome://global/skin/icons/settings.svg"]) {
  display: none !important;
}

.actions-list {
  display: var(--display, inherit) !important;
&:has(.expanded-button) {
  display: flex !important;
}
}

.webextension-browser-action {
  margin-bottom: 11px !important;
}

#urlbar {
  left: 10px !important;
  top: 45px !important;
  max-width: 201px !important;
  -moz-window-dragging: no-drag;
&::before {
  content: "";
  position: absolute;
  top: -8px;
  left: -9px;
  width: 220px;
  height: 48px;
}
}

:has(#sidebar-main:not([hidden])) {
:has(#urlbar[usertyping]) {
#urlbar {
  left: 25vw !important;
}

#sidebar-main {
  margin-top: -14px !important;
  transition: margin-top .25s !important;
}
}
}

#stop-reload-button {
&::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 226px;
  height: 10px;
}

&::after {
  content: "";
  position: absolute;
  top: 8px;
  left: 213px;
  width: 13px;
  height: 100%;
}
}

#urlbar-background, .urlbar-input-container {
  height: 32px !important;
  border-radius: 8px !important;
}

#urlbar-search-mode-indicator {
  margin-top: 4px !important;
}

#identity-box, #tracking-protection-icon-container {
  margin-top: 1px !important;
}

#back-button {
  list-style-image: url("resources/back.svg") !important;
}

#forward-button {
  list-style-image: url("resources/forward.svg") !important;
}

#tabs-newtab-button {
  margin-top: 5px !important;
}

#tabs-newtab-button,
#vertical-tabs-newtab-button {
  font-size: 13px !important;
}

.tabbrowser-tab:-moz-window-inactive {
  opacity: .5 !important;
}

.tabbrowser-tab .tab-label-container {
  margin-left: 1px;
}

.tab-background {
  border-radius: 8px !important;
}

.tabbrowser-tab:not([selected], [pinned], :hover) .tab-background {
  background: transparent !important;
}

.tabbrowser-tab:not([pinned]):is([soundplaying], [muted], [activemedia-blocked]) .tab-label-container {
  margin-left: 6.5px;
}

.tabbrowser-tab:hover:not([pinned]):is([soundplaying], [muted], [activemedia-blocked]) .tab-label-container {
  margin-left: 11.5px;
}

.tabbrowser-tab[usercontextid] > .tab-stack > .tab-background > .tab-context-line {
  margin: 6px 0 6px 0 !important;
}

.tab-group-label {
  font-weight: normal !important;
  font-size: 13px !important;
  color: inherit !important;
  opacity: .6;
  outline: none !important;
  min-width: 0 !important;
  margin-top: -5px !important;
  margin-bottom: -5px !important;
  padding-left: 15px !important;
  background-color: transparent !important;
  background-image: url("chrome://global/skin/icons/arrow-down-12.svg");
  background-repeat: no-repeat;
  background-position: left;
  -moz-context-properties: fill;
  fill: currentColor;
tab-group[collapsed] > .tab-group-label-container > & {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  background-image: url("chrome://global/skin/icons/arrow-right-12.svg");
  }
}

tab-group {
&:not([collapsed])::before {
  width: 1.5px !important;
  margin-top: -12px !important;
}

* { transition: margin-top .2s; }
}

.tab-group-line {
#tabbrowser-tabs & {
  width: 1.5px !important;

.tabbrowser-tab:first-of-type > .tab-stack > .tab-background > & {
  inset-block-start: 2px !important;
}

.tabbrowser-tab:last-of-type > .tab-stack > .tab-background > & {
  inset-block-end: 2px !important;
}
}
}

.tab-group-label-container {
#tabbrowser-tabs[orient="vertical"] tab-group:not([collapsed]) > &::after {
  width: 0 !important;
}
}

:has(#sidebar-main:not([hidden])) {
#PersonalToolbar {
  margin-left: 221px !important;
  width: calc(100% - 229px);
}
}

:has(#sidebar-box:not([hidden])) {
#PersonalToolbar {
  margin-left: 499px !important;
  width: calc(100% - 507px);
}

#sidebar-box {
  margin-right: -8px !important;
}
}

:has(#sidebar-box[sidebarcommand="viewGenaiChatSidebar"]:not([hidden])) {
#PersonalToolbar {
  margin-left: 619px !important;
  width: calc(100% - 627px);
}
}

:root:not([inDOMFullscreen]) {
#nav-bar {
  padding-top: 6.5px !important;
  padding-left: 71px !important;
}

#tabbrowser-tabpanels {
  margin-top: -45.5px;
  transition: .25s !important;
}

:has(#nav-bar:hover) {
#tabbrowser-tabpanels {
  margin-top: -8.5px;
  transition: .25s !important;
}
}
}

:has(#tabbrowser-tabs[expanded]) {
--padding: 0;
#sidebar-main {
  min-width: 221px !important;
  margin-right: -8px !important;
}

#urlbar[breakout][breakout-extend] {
  top: 20vh !important;
  left: 25vw !important;
}

.tab-close-button {
  margin-inline-end: calc(-1 * var(--tab-close-button-padding)) !important;
}

:has(.titlebar-buttonbox:hover, #urlbar:hover, #back-button:hover, #forward-button:hover, #stop-reload-button:hover, #sidebar-button:hover) {
#tabbrowser-tabpanels {
  margin-top: -45.5px;
}
}
}

:has(#tabbrowser-tabs:not([expanded])) {
--padding: 16px;
:has(#sidebar-main:not([hidden])) {
.sidebar-splitter {
  cursor: col-resize !important;
}

#PersonalToolbar {
  margin-left: 82px !important;
  width: calc(100% - 90px);
}
}

:has(#sidebar-box:not([hidden])) {
.sidebar-splitter {
  cursor: default !important;
}

#nav-bar {
  padding-left: 352px !important;
}

#PersonalToolbar {
  margin-left: 360px !important;
  width: calc(100% - 368px);
}
}

:has(#sidebar-box[sidebarcommand="viewGenaiChatSidebar"]:not([hidden])) {
#nav-bar {
  padding-left: 472px !important;
}

#PersonalToolbar {
  margin-left: 480px !important;
  width: calc(100% - 488px);
}
}

.tab-group-line {
#tabbrowser-tabs & {
  inset: -3px -8px -2px !important;

.tabbrowser-tab:first-of-type > .tab-stack > .tab-background > & {
  inset-block-start: 2px !important;
}

.tabbrowser-tab:last-of-type > .tab-stack > .tab-background > & {
  inset-block-end: 2px !important;
}
}
}

.tab-group-label {
  margin-left: 35px !important;
  padding-left: 50px !important;
}

tab-group {
&:not([collapsed])::before {
  margin-top: 20px !important;
}
}

.tabbrowser-tab[pinned],
#tabbrowser-tabs {
  width: 74px !important;
}

.tabbrowser-tab {
  padding-left: 9px !important;
}

.tab-background {
  margin-inline: 0 !important;
  width: 62px !important;
}

.tabbrowser-tab:not([pinned]) .tab-icon-image {
  display: unset;
  margin-left: 6px;
}

#tabs-newtab-button,
#vertical-tabs-newtab-button {
  min-width: 62px !important;
  margin-left: 10px !important;
}

.tab-close-button {
  opacity: 0 !important;
}

.tabbrowser-tab:hover .tab-close-button {
  opacity: 1 !important;
}

#vertical-pinned-tabs-container-separator {
  margin-right: -20px !important;
}

#urlbar::before {
  width: 82px;
}

#urlbar[breakout][breakout-extend] {
  top: 20vh !important;
  left: 20vw !important;
}

:has(#urlbar[usertyping]) {
#urlbar {
  left: 20vw !important;
}
}

#urlbar:not([breakout][breakout-extend], [usertyping]) {
  width: 62px !important;

#identity-box[pageproxystate="invalid"] #identity-icon {
  margin-left: -5px !important;
}

#identity-box {
  margin-right: 16px !important;
  margin-left: 16px !important;
}

#identity-permission-box,
#notification-popup-box,
#tracking-protection-icon-container {
  display: none !important;
}
}

:has(.titlebar-buttonbox:hover, #urlbar:hover) {
#tabbrowser-tabpanels {
  margin-top: -45.5px;
}
}

@media -moz-pref("sidebar.visibility", "expand-on-hover") {
:has(#back-button:hover, #forward-button:hover, #reload-button:hover, #stop-button:hover, #sidebar-button:hover, #urlbar:not([breakout][breakout-extend], [usertyping]):hover, #urlbar:not([breakout][breakout-extend], [usertyping]) #page-action-buttons > *[open], #urlbar:not([breakout][breakout-extend], [usertyping]) #identity-box > *[open], #urlbar:not([breakout][breakout-extend], [usertyping]) #identity-permission-box[open], #urlbar:not([breakout][breakout-extend], [usertyping]) #notification-popup-box[open], #urlbar:not([breakout][breakout-extend], [usertyping]) #tracking-protection-icon-container[open]) {
:has(#tabbrowser-tabs:not([expanded])) {
--display: block;
}

#urlbar::before {
  width: 220px;
}

#tabbrowser-tabbox {
  clip-path: inset(-50px 0 0 147px);
  margin-left: -147px !important;
}

#tabbrowser-tabpanels {
  margin-top: -45.5px !important;
}

#urlbar:not([breakout][breakout-extend], [usertyping]) {
  width: 221px !important;

#identity-box[pageproxystate="invalid"] #identity-icon {
  margin-left: unset !important;
  margin-right: 4px !important;
}

#identity-box {
  margin-right: 28px !important;
  margin-left: 0 !important;
}

#identity-permission-box[open=true],
#identity-permission-box[hasPermissions],
#identity-permission-box[hasSharingIcon],
#notification-popup-box,
#tracking-protection-icon-container {
  display: flex !important;
}
}

#tabbrowser-tabs {
tab-group > :is(.tab-group-label-container, .tabbrowser-tab),
&[movingtab][movingtab-addToGroup]:not([movingtab-createGroup],[movingtab-ungroup]) .tabbrowser-tab:is(:active,[multiselected]) {
  margin-inline-start: var(--space-medium) !important;
}
}

tab-group {
.tab-background {
  width: 192px !important;
}

.tab-group-line {
#tabbrowser-tabs & {
  inset-inline-start: -9px !important;
}
}

.tab-group-label {
  margin-left: unset !important;
  padding-left: 15px !important;
#tabbrowser-tabs:not([expanded]) & {
  width: unset !important;
  min-height: unset !important;
  max-width: unset !important;
  align-self: start !important;
  line-height: var(--tab-group-label-height) !important;
  margin-inline-end: var(--space-medium) !important;
  padding-block: var(--tab-group-label-padding) !important;
&::first-letter {
  font: unset !important;
  line-height: unset !important;
}
}
}
}

#tabbrowser-tabs,
#tabs-newtab-button,
#vertical-tabs-newtab-button {
  width: 221px !important;
}

#tabs-newtab-button,
#vertical-tabs-newtab-button {
  margin-left: 9px !important;
}

#tabbrowser-tabs .toolbarbutton-text {
  margin-left: 2px !important;
}

#vertical-pinned-tabs-container {
.tab-icon-overlay {
  margin-left: -15px;
}
}

.tabbrowser-tab[pinned] {
  width: unset !important;
}

.tab-background {
  width: 201px !important;
}

.tab-icon-image {
  margin-left: -9px !important;
  margin-right: 7.5px !important;
}

.tab-icon-overlay {
  margin-left: -9px !important;
}

.tab-label-container,
#tabbrowser-tabs .toolbarbutton-text {
  display: block !important;
}
}

:has(#urlbar:not([breakout][breakout-extend], [usertyping]):hover, #urlbar:not([breakout][breakout-extend], [usertyping]) #page-action-buttons > *:hover) {
#urlbar:not([breakout][breakout-extend], [usertyping]) {
#identity-box {
  margin-right: unset !important;
  margin-left: unset !important;
}
}
}

:has(#tabbrowser-tabs[expanded], #tabbrowser-tabs:not([expanded])) {
#urlbar[breakout][breakout-extend] {
  top: 20vh !important;
  left: 25vw !important;
}

:has(#urlbar[usertyping]) {
#urlbar {
  left: 25vw !important;
}
}
}

:has(#sidebar-box:not([hidden])) {
:has(#back-button:hover, #forward-button:hover, #reload-button:hover, #stop-button:hover, #sidebar-button:hover, #urlbar:not([breakout][breakout-extend], [usertyping]):hover, #urlbar:not([breakout][breakout-extend], [usertyping]) #page-action-buttons > *[open], #urlbar:not([breakout][breakout-extend], [usertyping]) #identity-box > *[open], #urlbar:not([breakout][breakout-extend], [usertyping]) #identity-permission-box[open], #urlbar:not([breakout][breakout-extend], [usertyping]) #notification-popup-box[open], #urlbar:not([breakout][breakout-extend], [usertyping]) #tracking-protection-icon-container[open]) {
#nav-bar {
  padding-left: 71px !important;
}
}
}
}
}

:has(#sidebar-main:not([hidden])) {
:has(#urlbar[breakout][breakout-extend]) {
#sidebar-main {
  margin-top: -14px !important;
  transition: margin-top .25s !important;
}

#tabbrowser-tabs {
  margin-left: unset !important;
  transition: unset !important;
}
}
}

:root:not([chromehidden~="toolbar"]):has(#sidebar-main[hidden]) {
.titlebar-buttonbox-container {
  visibility: hidden;
}

#nav-bar {
  padding-left: 5px !important;
}

#tabbrowser-tabs {
  margin-top: 40px !important;
}

#urlbar:not([breakout][breakout-extend], [usertyping]) {
  top: 15px !important;
  left: -80px !important;
  opacity: 0;
  transition: left .25s !important;
}

#urlbar::before {
  content: none;
}

#sidebar-main {
  width: 82px;
  height: calc(100% - 16px) !important;
  display: flex !important;
  position: fixed;
  top: -17.5px;
  left: -80px;
  opacity: 0;
  transition: .25s;
  z-index: 9;
  border-top-left-radius: 8px !important;
  border-bottom-left-radius: 8px !important;
  background-color: var(--bg4);
  backdrop-filter: blur(30px);
  box-shadow: var(--bs1);
  overflow: unset !important;
@media (prefers-color-scheme: dark) {
  box-shadow: var(--bs2) !important;
@media (-moz-platform: macos) {
  outline: 1px solid rgba(235, 235, 235, .2) !important;
  outline-offset: -1px !important;
}   
}
&::before {
  content: "";
  position: absolute;
  top: 0;
  left: -20px;
  width: 25px;
  height: 100%;
}
&::after {
  content: "";
  position: absolute;
  top: 0;
  right: -20px;
  width: 25px;
  height: 100%;
}
}

:has(#sidebar-main:hover, #urlbar:not([breakout][breakout-extend], [usertyping]):hover, #urlbar:not([breakout][breakout-extend], [usertyping]) #identity-box > *[open], .tab-throbber[busy], #tab-group-name:focus) {
#sidebar-main {
  left: 8px;
  opacity: 1;
  transition: .25s;
}

#urlbar:not([breakout][breakout-extend], [usertyping]) {
  left: 18px !important;
  opacity: 1;
  transition: left .25s !important;
}
}
}

:root[inFullscreen]:has(#tabbrowser-tabs:not([expanded])) {
:has(#sidebar-box:not([hidden])) {
#sidebar-button {
  margin-left: -335px !important;
  margin-right: 300px !important;
}  
}
}

:root[inFullscreen]:has(#tabbrowser-tabs:not([expanded])) {
:has(#sidebar-box[sidebarcommand="viewGenaiChatSidebar"]:not([hidden])) {
#sidebar-button {
  margin-left: -455px !important;
  margin-right: 420px !important;
}  
}
}

:root[inFullscreen] {
.browser-toolbox-background {
  background: transparent !important;
}

#urlbar {
  left: 10px !important;
}

#sidebar-button {
  margin-left: -62px !important;
  margin-right: 62px !important;
}

:has(#tabbrowser-tabs:not([expanded])) {
#sidebar-button {
  margin-left: -52px !important;
  margin-right: 22px !important;
}
}

:has(#sidebar-main[hidden]) {
#nav-bar {
  padding-left: 55px !important;
}
}
}

:root[customizing] {
#urlbar {
  visibility: hidden;
}
}
}

/* win */

@media (-moz-platform: windows) {
:root:-moz-window-inactive {--sidebar-background-color: transparent !important;}

:root#main-window {
  appearance: none !important;
}

:root[inFullscreen] {
.titlebar-buttonbox-container {
  display: none !important;
}

#PersonalToolbar {
  visibility: unset !important;
}
}

richlistitem[selected] {
  background: none !important;
}

#downloadsListBox {
  overflow-x: hidden;
  border: 0 !important;
}

toolbarbutton:-moz-window-inactive {
  opacity: 50% !important;
}

.titlebar-buttonbox-container {
  left: 15px;
  top: 19.5px;
}

.titlebar-button {
  padding: 0 4px !important;
  background-color: transparent !important;
&:-moz-window-inactive {
  list-style-image: url("resources/titlebar-backdrop.svg") !important;
@media (prefers-color-scheme: dark) {
  list-style-image: url("resources/titlebar-backdrop-dark.svg") !important;
}
}
}

.titlebar-close {
  order: -1;
  list-style-image: url("resources/titlebar-close.svg") !important;  
.titlebar-buttonbox:hover & {
  list-style-image: url("resources/titlebar-close-hover.svg") !important;
&:active {
  list-style-image: url("resources/titlebar-close-active.svg") !important;
@media (prefers-color-scheme: dark) {
  list-style-image: url("resources/titlebar-close-active-dark.svg") !important;
}
}
}
}

.titlebar-min {
  list-style-image: url("resources/titlebar-min.svg") !important;  
.titlebar-buttonbox:hover & {
  list-style-image: url("resources/titlebar-min-hover.svg") !important;
&:active {
  list-style-image: url("resources/titlebar-min-active.svg") !important;
@media (prefers-color-scheme: dark) {
  list-style-image: url("resources/titlebar-min-active-dark.svg") !important;
}
}
}
}

.titlebar-max {
  list-style-image: url("resources/titlebar-max.svg") !important;  
.titlebar-buttonbox:hover & {
  list-style-image: url("resources/titlebar-max-hover.svg") !important;
&:active {
  list-style-image: url("resources/titlebar-max-active.svg") !important;
@media (prefers-color-scheme: dark) {
  list-style-image: url("resources/titlebar-max-active-dark.svg") !important;
}
}
}
}

.titlebar-restore {
  list-style-image: url("resources/titlebar-max.svg") !important;  
.titlebar-buttonbox:hover & {
  list-style-image: url("resources/titlebar-restore-hover.svg") !important;
&:active {
  list-style-image: url("resources/titlebar-restore-active.svg") !important;
@media (prefers-color-scheme: dark) {
  list-style-image: url("resources/titlebar-restore-active-dark.svg") !important;
}
}
}
}

.urlbar-input-container > box {
  -moz-window-dragging: no-drag !important;
}

panel[type="arrow"] {
  --panel-background: light-dark(rgba(255, 255, 255, .75), rgba(15, 15, 12, .75)) !important;
  --panel-shadow-margin: 0px !important;
}

#contentAreaContextMenu .menu-iconic-left {
  display: unset;
}

.findbar-container, #statuspanel-label {
  box-shadow: 0 15px 25px rgba(0, 0, 0, .25), 0 0 0 1px rgba(0, 0, 0, .17) !important;
}

@media -moz-pref("sidebar.verticalTabs") {
.titlebar-buttonbox-container {
  left: 12px;
  top: 17px;
}

.titlebar-buttonbox {
&::before {
  content: "";
  position: absolute;
  top: 12px;
  left: -16px;
  width: 82px;
  height: 15px;
}

&::after {
  content: "";
  position: absolute;
  top: -15px;
  left: -16px;
  width: 82px;
  height: 15px;
}
}

.titlebar-close::before {
  content: "";
  position: absolute;
  top: -15px;
  left: -15px;
  width: 15px;
  height: 30px;
}

#sidebar-box {
  margin-top: -44.5px !important;
}

:root:not([inDOMFullscreen]) {
#tabbrowser-tabpanels {
  margin-top: -44.5px;
}
}

:has(#tabbrowser-tabs[expanded]) {
:has(.titlebar-buttonbox:hover, #urlbar:hover, #back-button:hover, #forward-button:hover, #stop-reload-button:hover, #sidebar-button:hover) {
#tabbrowser-tabpanels {
  margin-top: -44.5px;
}
}
}

:has(#tabbrowser-tabs:not([expanded])) {
:has(.titlebar-buttonbox:hover, #urlbar:hover) {
#tabbrowser-tabpanels {
  margin-top: -44.5px;
}
}
}
}

@media (prefers-color-scheme: dark) {
&:not(:-moz-window-inactive) {::selection { background: #416189 }}
* {
  --organizer-pane-background: #2d2d2d !important;
  --organizer-toolbar-background: #333 !important;
  --organizer-content-background: #333 !important;
  --organizer-hover-background: #2e2e2f !important;
  --organizer-selected-background: #2e2e2f !important;
}

#urlbar[breakout][breakout-extend] #urlbar-background,
.findbar-container, .dialogBox, #statuspanel-label,
#PersonalToolbar {
  outline: none !important;
}

.findbar-container, #statuspanel-label {
  box-shadow: 0 15px 25px rgba(0, 0, 0, .25), 0 0 0 1px rgba(255, 255, 255, .15) !important;
}

menupopup, panel[type="arrow"] {
  --panel-border-color: rgba(255, 255, 255, .1) !important;
  --arrowpanel-border-color: rgba(255, 255, 255, .1) !important;
}

.panel-arrowcontent {
  border: 1px solid rgba(255, 255, 255, .1) !important;
}

treecol {
  background-color: #333 !important;
}

richlistitem {
  color: #fff !important;
}

#editBookmarkPanel .expander-up,
#editBookmarkPanel .expander-down {
  border: none !important;
}
}
}
